{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Login - enMASKra2</title>
    <link rel="stylesheet" href="{% static 'core/css/estilo.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head> 
<body class="login-body">
    <div class="login-container">
        <div class="login-overlay">
            <img src="{% static 'core/img/logo_enmaskra2.jpeg' %}" alt="Logo enMASKra2" class="logo-login">
            {% if messages %}
              {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
              {% endfor %}
            {% endif %}
            <form method="post" action="{% url 'login' %}" id="loginForm" novalidate>
                {% csrf_token %}
                <h2>Iniciar sesión</h2>
                <div class="mb-3">
                    <input type="text" name="username" id="username" class="form-control" placeholder="Usuario" required>
                    <div class="invalid-feedback">Por favor ingresa tu nombre de usuario</div>
                </div>
                <div class="mb-3">
                    <input type="password" name="password" id="password" class="form-control" placeholder="Contraseña" required>
                    <div class="invalid-feedback">Por favor ingresa tu contraseña</div>
                </div>
                <button type="submit" class="btn btn-primary w-100">Iniciar sesión</button>
                <div class="form-options mt-3">
                    <label><input type="checkbox" name="remember"> Mantenerme conectado</label>
                    <a href="#" class="form-link">¿Olvidaste tu contraseña?</a>
                </div>
                <p class="form-footer">
                    ¿No tienes cuenta? <a href="{% url 'registro' %}">Regístrate ahora</a>
                </p>
            </form>
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
            {% endif %}            
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const form = document.getElementById('loginForm');
    const username = document.getElementById('username');
    const password = document.getElementById('password');

    username.addEventListener('input', () => {
        if (username.value.trim() !== '') {
            username.classList.remove('is-invalid');
        }
    });

    password.addEventListener('input', () => {
        if (password.value.trim() !== '') {
            password.classList.remove('is-invalid');
        }
    });

    form.addEventListener('submit', function(event) {
        let valid = true;

        if (username.value.trim() === '') {
            username.classList.add('is-invalid');
            valid = false;
        }
        if (password.value.trim() === '') {
            password.classList.add('is-invalid');
            valid = false;
        }

        if (!valid) {
            event.preventDefault();
        }
    });
</script>
</body>
</html>